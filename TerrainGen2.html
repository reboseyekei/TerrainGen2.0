<!DOCTYPE html>
<html>
<head>
	<canvas id="world" width="768" height="768" ></canvas>
</head>
<body>
	<script>
		var c = document.getElementById("world");
		var ctx = c.getContext("2d");
		const MAPSIZE = 1000;
		var map = new Array(MAPSIZE);
		var contSize = 100;
		var points = 3;
		var steepness = 0.2;
		var core = elevationPoints(points);
		
		//Classes: -----------------
		function Tile()
		{
			this.type = 'w';
			this.elevation = 0;
		}
		function Interface()
		{
			this.zoom = 0;
			this.yView = 0;
			this.xView = 0;
		}
		//End Classes--------------
		
		var pView = new Interface();
		
		for(i = 0; i < MAPSIZE; i++){
			map[i] = new Array(MAPSIZE);
			for(j = 0; j < MAPSIZE; j++){
				map[i][j] = new Tile();
			}
		}
		
		
		function drawEntireMap()
		{
			for(i = 0; i < MAPSIZE; i++){
				for(j = 0; j < MAPSIZE; j++){
					ctx.fillStyle = "blue";
					ctx.fillRect(j, i, 1, 1);
				}
			}
		}

		{
			var zoom = 20-pView.zoom;
			for(i = pView.yView; i < pView.yView + 20; i++){
				for(j = pView.xView; j < pView.xView + 20; j++){
					ctx.fillStyle = "blue";
					ctx.fillRect(j*zoom, i*zoom, 1*zoom, 1*zoom);
				}
			}
		}
		function safeC(a)
		{
			if(a > MAPSIZE){ return a - MAPSIZE; }
			if(a < 0){ return MAPSIZE - a; }
			return a;
		}

		function elevationPoints(num)
		{
			var core = new Array(num * 2);
			for(i = 0; i < num * 2; i++){
				core[i] = Math.floor(Math.random() * MAPSIZE);
			}
			while(num > 0){
				map[core[num * 2 - 2]][map[core[num * 2 - 1]].elevation = 1;
				num--;
			}
			return core;
		}

		function elevationSpread(size, cores, coreX, coreY)
			if(size = contSize){
				var coreX = core[(cores * 2) + 2];
				var coreY = core[(cores * 2) - 1];
			}
			if(size => 0){
				map[coreX + 1][coreY].elevation = (map[coreX][coreY].elevation - (Math.random() * steepness));
				map[coreX - 1][coreY].elevation = (map[coreX][coreY].elevation - (Math.random() * steepness));
				map[coreX][coreY + 1].elevation = (map[coreX][coreY].elevation - (Math.random() * steepness));
				map[coreX][coreY - 1].elevation = (map[coreX][coreY].elevation - (Math.random() * steepness));
				elevationSpread(size--, cores, coreX + 1, coreY);
				elevationSpread(size--, cores, coreX - 1, coreY);
				elevationSpread(size--, cores, coreX, coreY + 1);
				elevationSpread(size--, cores, coreX, coreY - 1);
			}
			else{
				if(cores > 0){
					elevationSpread(contSize, cores--, 0, 0, 0);
				}
				else{
					return;
				}
			}
		}

		function draw();
		function elevationSpread(contSize, points, 0, 0);

	</script>
</body>
</html>
